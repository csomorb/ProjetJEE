<!DOCTYPE html>
<html lang="fr"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <h:head>
        <title>Album</title>
        <h:outputStylesheet library="css" name="album.css"  />
    </h:head>
    <h:body>
    <ui:include src="/WEB-INF/menu.xhtml" />
    
    <h1>
        <h:outputText value="#{albumController.album.title}"> </h:outputText>
    </h1>
    <p>
    	<h:outputText value="#{albumController.album.description}"> </h:outputText>
    </p>
    
    <c:if test="#{albumController.isMine()}">
    	<h:form>
    	<h:outputLabel for="descr" value="Nouveau description : " />
		<h:inputText id="descr" value="#{albumController.description}" 
			title="Nouvelle description"/>
    
   
    
    	<h:commandButton action="#{albumController.changerDescription()}" value="Changer la description">
    	   <f:param name="idAlbum" value="#{albumController.album.id}" />
    	</h:commandButton>
    	
    </h:form>
    
    
	    <h:form>
		    <h:commandLink action="#{partageController.partagerAlbum()}" value="Partager l'abum">
				<f:param name="idAlbum" value="#{albumController.album.id}" />
			</h:commandLink>
	    </h:form>
    </c:if>
    <ui:repeat var="image" value="#{albumController.listeImage}">
     	<h:graphicImage value="resources/img/#{image.getAlbum().getOwner().getId()}/#{image.getAlbum().getId()}/#{image.getTitle()}" class="minature-album"/>
     	<h:form>
    		<h:commandLink action="#{taggingController.tagPhoto}" value="tagger la photo">
				<f:param name="photoId" value="#{image.id}" />
				<f:param name="idAlbum" value="#{albumController.album.id}" />
			</h:commandLink>   |   
			<h:commandLink action="#{albumController.deletePicture(image.id)}" value="supprimer">
				<f:param name="photoId" value="#{image.id}" />
				<f:param name="idAlbum" value="#{albumController.album.id}" />
			</h:commandLink>
			
		</h:form>
    </ui:repeat>
    
-----------------------------------------------------------------------------------------<br/>
<h:form >

<h:dataTable value="#{albumController.listeImage}" var="alb" >
   <h:column>    				
     <f:facet name="header">Titre</f:facet>    				
     <h:outputText value="#{alb.title}"/> 
   </h:column>
   <h:column>
      <f:facet name="header">Id</f:facet>
      <h:outputText value="#{alb.id}"/> 
   </h:column>
   <h:column>
   	  <f:facet name="header">Lien de l'album</f:facet>	  
      <h:commandButton action="#{taggingController.tagPhoto}" value="Tagger">
		<f:param name="idAlbum" value="#{alb.id}" />
	</h:commandButton> 
	<h:commandLink action="#{taggingController.tagPhoto}" value="Tagger">
		<f:param name="idAlbum" value="#{alb.id}" />
	</h:commandLink>
	
	
   	</h:column>  
   
   
   <!-- 
   <h:column>
      <h:commandLink action="#{appUserController.delete(user.id)}" value="delete"/>
   </h:column>
   -->
</h:dataTable>

</h:form>



    </h:body>
</html>